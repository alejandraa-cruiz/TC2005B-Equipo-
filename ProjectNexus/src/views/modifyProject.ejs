<!DOCTYPE html>
<html lang="en">
<%- include('partials/head.ejs') %>

<body class="font-inter">
<%- include('partials/leftNavigation.ejs') %>
<main id="main-content" class="relative left-60 w-[calc(100%-15rem)] bg-mainBg h-screen
                        p-6 break-words phone:left-0 phone:w-full overflow-y-scroll overflow-x-hidden custom-scrollbar">
    <div id="content-wrapper">
        <!-- Content goes here -->
        
        <div class="flex justify-end">
            <img class="w-20" src="/images/dh_logo.png" alt="">
        </div>

        <div class="w-96 flex items-center mx-12 mt-8 mb-24">
            <i class='bx bxs-file-plus text-4xl'></i>
            <h1 class="text-xl pl-3">Modify Project</h1>
        </div>

        <form id="project-form" class="w-full flex items-center justify-center">
            <div class="w-full px-12 phone:p-3">
                <div class="w-full flex justify-end md:w-1/2 px-3 mb-1">
                    <div class="relative w-full">
                        <div class="absolute inset-y-4 right-5 flex w-full pointer-events-none justify-end">
                            <i class='bx bxs-folder-open'></i>
                        </div>
                        <input class="hover:cursor-text mx-auto w-full block border p-0 bg-gray-200 text-gray-700 border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none hover:bg-white hover:border-gray-500 duration-500"
                            id="project_name" name="project_name" type="text"
                            placeholder="Name" value="<%=name%>" required >
                    </div>
                </div>

                <div class="w-full md:w-1/2 px-3 mb-6">
                    <label for="start_date" class="px-3 text-gray-700">
                        Start date
                    </label>
                    <input
                        class="w-full appearance-none block bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none hover:bg-white hover:border-gray-500 duration-500 cursor-text"
                        name="start_date" id="start_date" type="date" value="<%=start_date%>" required>
                </div>

                <div class="w-full md:w-1/2 px-3 mb-6">
                    <label for="end_date" class="px-3 text-gray-700">
                        End date
                    </label>
                    <input
                        class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none hover:bg-white hover:border-gray-500 duration-500 cursor-text"
                        name="end_date" id="end_date" type="date" value="<%=end_date%>" required>
                </div>

                <!--Dropdown of epics-->
                <div class="w-full md:w-1/2 px-3 mb-6">
                    <a id="dropdown-button" class="cursor-pointer px-3 block border bg-gray-200 text-gray-700 border-gray-200 rounded py-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500 hover:bg-white hover:border-gray-500 duration-500">
                        <div class="flex justify-between">
                            Select your Project epics
                            <i class='bx bxs-zap'></i>
                        </div>
                        <ul id="dropdown" data-open="false" class="hover:cursor-pointer appearance-none hidden overflow-y-scroll overflow-x-clip custom-scrollbar max-h-[8.0rem]">
                            <% if (Epics.length === 0) {%>
                            <li class="pt-2 pl-3">You don't have assigned epics</li>
                                <%}%>
                            <% Epics.forEach((epic, index)=> { %>
                                <li onclick="event.stopPropagation()">
                                    <% if (id == epic.id_project){ %>
                                    <label for="<%=epic.epic_link%>" class="flex gap-2 text-[14px] hover:cursor-pointer p-2 hover:bg-slate-50 hover:border-gray-500 duration-500">
                                        <input checked type="checkbox" name="<%=epic.epic_link%>" id="<%=epic.epic_link%>"  >
                                        <%=epic.epic_title%>

                                    </label>
                                </li>
                                <%} else {%>
                                    <label for="<%=epic.epic_link%>" class="flex gap-2 text-[14px] hover:cursor-pointer p-2 hover:bg-slate-50 hover:border-gray-500 duration-500">
                                        <input type="checkbox" name="<%=epic.epic_link%>" id="<%=epic.epic_link%>"  >
                                        <%=epic.epic_title%>
                                    </label>
                                </li>
                                <%}%>
                            <%})%>
                        </ul>
                    </a>
                </div>
                
                <div class="flex justify-center w-full">
                    <button
                        class="w-[8rem] h-[2.6rem] bg-accent-1 text-white rounded-[3px] text-sm hover:bg-white hover:text-accent-1 duration-300 shadow-sm">
                        Save
                    </button>
                </div>
            </div>            
        </form>
    </div>
</main>
<div id="dark-sepaator" class="fixed top-0 bottom-0 w-screen h-screen bg-black opacity-20 hidden"></div>

<script defer type="module" src="/scripts/project.js"></script>
</body>

</html>